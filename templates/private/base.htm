{% extends "base.htm" %}

{% block content %}
<form method="POST" action="/" class="form-horizontal">
  <div class="well" style="background-color:#e5e5e5;border:#d5d5d5;">
	<div class="control-group">
		<label for="password" class="control-label">Enter master password:</label>
		<div class="controls input-append">
			<input type="password" name="password" id="password" class="span3" required>
      <span id="password-result" class="add-on" style="color: #C3C; font-size: 18px;"><i class="icon-ok-sign"></i></span>
		</div>
	</div>
  <div class="control-group">
    <label for="identifier" class="control-label">Create password for:</label>
    <div class="controls">
      <input type="text" name="identifier" id="identifier" class="span3" required>
    </div>
  </div>
	<div class="control-group">
		<div class="controls">
			<input type="submit" class="btn btn-primary" value="Generate new password">
		</div>
	</div>
  </div>
  {% block result %}
  {% endblock result %}
</form>
{% endblock content %}

{% block scripts_end %}
	$(document).ready(function(){
    var items = [];

    $('#identifier').attr('autocomplete', 'off').typeahead({'source': function() {
      return items; 
    }});

    $.fn.anychange = function (fn) {
      $(this).change(fn).keyup(fn).each(fn);
      return this;
    };
    $('#password').anychange(function() {
      var correct = ($(this).val() == 'hello');

      $('#password-result').css('display', correct?'inline':'none');

      if (correct) {
        items = ['gmail', 'facebook', 'google', 'google-apps'];
      }else{
        items = [];
      }

    });

		/*$('.progressively-removed').hide();
		$('#password').on('blur', function(){
			//$(this).after("<span>Checking</span>");
			$('#authenticated').collapse('toggle');
		});*/
	});
{% endblock scripts_end %}
